{% extends "layout.html" %}

{% load static from staticfiles %}
{% load i18n %}

{% block search_form %}
    {% with sidebar=1 sidebar_toggle_icon='fa-info' %}
        {% include 'includes/search_form.html' %}
    {% endwith %}
{% endblock %}

{% block sidebar %}
    <nav class="collapse nav-sidebar" id="sidebar">

        <div class="meta-data">

            <div class="meta-item">
                <label>{% trans 'Court' %}:</label>
                <div class="meta-value"><a href="{{ item.court.get_absolute_url }}">{{ item.court.name }}</a></div>
            </div>

            <div class="meta-item">
                <label>{% trans 'Court chamber' %}: </label>
                <div class="meta-value">{{ item.court_chamber }}</div>
            </div>

            <div class="meta-item">
                <label>{% trans 'Document type' %}: </label><div class="meta-value">{{ item.get_case_type }}</div>
            </div>

            <div class="meta-item">
                <label>{% trans 'File number' %}: </label><div class="meta-value">{{ item.file_number }}</div>
            </div>


            <div class="meta-item">
                <label>{% trans 'Published on' %}: </label><div class="meta-value">{{ item.get_date }}</div>
            </div>

            {% if debug %}
                <div class="meta-item">
                    <label>{% trans 'Source' %}: </label>
                    <div class="meta-value"><a href="{{ item.source_url }}" target="_blank" class="">{% trans 'btn_go_to_source' %}</a></div>
                </div>

                <div class="meta-item">
                    <label>{% trans 'Found at' %}: </label>
                    <div class="meta-value"><a href="{{ item.source_homepage }}" target="_blank">{{ item.source_name }}</a></div>
                </div>
            {% endif %}

            {% if item.source_file %}
            <div class="meta-item">
                <label>{% trans 'PDF' %}: </label>
                <div class="meta-value"><a href="{{ item.source_file.url }}">Download</a></div>
            </div>
            {% endif %}

            <div class="meta-item">
                <label for="permalink">{% trans 'Short-URL' %}: </label>
                <div class="meta-value">
                    <input id="permalink" class="form-control" readonly type="text" value="{{ item.get_short_url }}" onclick="this.select();">
                </div>
            </div>

            <hr>


            Entities:

            <button class="entity-LOCATION">{% trans 'Locations' %}</button>

            <button class="entity-ORGANIZATION">{% trans 'Organizations' %}</button>

            <button class="entity-PERSON">{% trans 'Persons' %}</button>

            <button class="entity-MONEY">{% trans 'Money' %}</button>


        </div>

    </nav>
{% endblock %}


{% block content %}

{% with item=item %}
    {% include 'admin_bar.html' %}
{% endwith %}

{% if item.is_private %}
    <div class="alert alert-danger">
        {% trans 'private_content_warning' %}
    </div>
{% endif %}


<nav class="breadcrumbs d-none d-md-block">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
        <i class="fa fa-home"></i> <a href="{% url 'homepage:index' %}">{% trans 'Home' %}</a>
    </li>
    <li class="breadcrumb-item">
        <a href="{% url 'cases:index' %}">{% trans 'Cases' %}</a>
    </li>
    <li class="breadcrumb-item">
        <a href="{{ item.court.get_absolute_url }}">{{ item.court.name }}</a>
    </li>
    <li class="breadcrumb-item">{{ item.file_number }}</li>
  </ol>
</nav>


<section class="case">

    <div class="title-center">
        <h2>{{ item.get_title }}</h2>
    </div>
    <div class="case-content">
        {% if item.get_content_as_html|length > 500 %}
            <div class="read-more-container">
                {% autoescape off %}
                    {{ item.get_content_as_html }}
                {% endautoescape %}

                <div class="read-more">
                    <button class="btn btn-success">
                        <i class="fa fa-arrow-down"></i>
                        {% trans 'btn_show_full_text' %}
                        <i class="fa fa-arrow-down"></i>
                    </button>
                </div>
            </div>
        {% else %}
            {% autoescape off %}
                {{ item.get_content_as_html }}
            {% endautoescape %}

        {% endif %}
    </div>
</section>

<section>
    <h3>{% trans 'Related Cases' %}</h3>
    {% if item.get_related %}
        {% with cases=item.get_related %}
        {% include 'cases/table.html' %}
        {% endwith %}

    {% else %}
        <p class="text-center">{% trans 'empty_related_content' %}</p>
    {% endif %}
</section>

{% include 'references.html' %}

{% endblock %}
